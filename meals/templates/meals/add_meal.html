{% extends 'base.html' %}
{% load static %}
{% block content %}

<h2><i class="fas fa-utensils"></i> Add Multiple Meals</h2>

<link rel="stylesheet" href="{% static 'meals/css/add_meal.css' %}">

<form method="post" id="meal-form">
  {% csrf_token %}

  <div class="input-container">
    <label for="food-search">Food Search:</label>
    <input type="text" id="food-search" placeholder="e.g., Apple, Rice, Chicken" autocomplete="off">
    
    <input type="hidden" id="food-id" name="food-id">

    <label for="quantity">Quantity (g/ml/units):</label>
    <input type="number" id="quantity" placeholder="e.g., 100 (grams)" min="1" step="any">

    <label for="date">Date:</label>
    <input type="date" id="date">

    <label class="keep-date-label">
      <input type="checkbox" id="keep-date" checked>
      Keep this date for all entries
    </label>
  </div>

  <div class="button-container">
    <button type="button" onclick="addMeal()" id="add-meal-button" class="add-meal" title="Add Meal">➕ Add Meal</button>
    <button type="button" id="clear-all-button" class="clear-button" title="Clear All">🗑️ Clear All</button>
  </div>

  <h4>Items Added: <span id="counter">0</span></h4>
  <table id="meal-list" class="meal-table">
    <thead>
      <tr>
        <th>Food</th>
        <th>Quantity</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="meal-list-body">
      <!-- Dynamically added rows will go here -->
    </tbody>
  </table>

  <input type="hidden" name="meals_json" id="meals-json">
  <button type="submit" class="save-button">💾 Save All</button>
</form>

<script src="{% static 'meals/js/add_meal.js' %}"></script>
{% endblock %}
{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>Meal History</h2>

<form method="get">
    <label for="start_date">Start date:</label>
    <input type="date" name="start_date" value="{{ start_date }}">
    <label for="end_date">End date:</label>
    <input type="date" name="end_date" value="{{ end_date }}">
    <button type="submit">Filter</button>
</form>

<h3>Calories Over Time</h3>
<div id="line-chart">{{ line_plot|safe }}</div>

<h3>Macronutrient Distribution</h3>
<div id="pie-chart">{{ pie_chart|safe }}</div>

<h3>Daily Macros</h3>
<div id="bar-chart">{{ bar_chart|safe }}</div>

<h3>Summary</h3>
<ul>
  <li><strong>Total Calories:</strong> {{ summary.calories }}</li>
  <li><strong>Total Protein:</strong> {{ summary.protein }} g</li>
  <li><strong>Total Carbs:</strong> {{ summary.carbs }} g</li>
  <li><strong>Total Fats:</strong> {{ summary.fats }} g</li>
</ul>
{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'meals/css/history.css' %}">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{% static 'meals/js/history.js' %}" defer></script>
{% endblock %}